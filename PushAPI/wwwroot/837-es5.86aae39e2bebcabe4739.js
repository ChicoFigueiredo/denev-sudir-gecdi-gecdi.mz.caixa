!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}(self.webpackChunkgecdi_mz_caixa=self.webpackChunkgecdi_mz_caixa||[]).push([[837],{34837:function(t,a,l){"use strict";l.r(a),l.d(a,{AtendimentoModule:function(){return ae}});var o=l(38583),i=l(3679),r=l(25814),d=l(99763),c=l(88002),s=l(92340);function m(e,t){var n=document.createElement("form");for(var a in n.target="_blank",n.method="POST",n.action=e,n.style.display="none",t){var l=document.createElement("input");l.type="hidden",l.name=a,l.value=t[a],n.appendChild(l)}document.body.appendChild(n),n.submit(),document.body.removeChild(n)}var u=l(37716),p=l(91841),h=s.N.urlAPI+"/api/atendentes",v=function(){var t=function(){function t(n){e(this,t),this.http=n,this.atendentes=[]}return n(t,[{key:"getAtendentes",value:function(){var e=this;return this.http.get("".concat(h)).pipe((0,c.U)(function(t){return e.atendentes=t,t}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275inject"](p.eN))},t.\u0275prov=u["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),f=s.N.urlAPI+"/api/chamados",g=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getChamados",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;return this.http.get("".concat(f,"?abertos=").concat(e,"&atendente=").concat(t,"&tratado=").concat(n))}},{key:"getChamadoById",value:function(e){return this.http.get("".concat(f,"/").concat(e))}},{key:"getDesCarimbarChamadoById",value:function(e){return this.http.post("".concat(f,"/").concat(e,"/descarimbar"),null)}},{key:"getCarimbarChamadoById",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.http.post("".concat(f,"/").concat(e,"/carimbar/?carimbo=").concat(encodeURI(t)),null)}},{key:"putTratarChamadoById",value:function(e,t,n){return this.http.post("".concat(f,"/").concat(e,"/tratado/?foiTratado=").concat(t,"&apelidoAtendente=").concat(n),null)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275inject"](p.eN))},t.\u0275prov=u["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),C=l(88182),x=l(26215),b=s.N.urlAPI+"/api/CacheParametroes",S=function(){var t=function(){function t(n){e(this,t),this.http=n,this.parametros=null,this._changeParametros=new x.X(this.parametros)}return n(t,[{key:"changeParametros",get:function(){return this._changeParametros.asObservable()}},{key:"getPatametros",value:function(){var e=this;return this.http.get("".concat(b)).pipe((0,c.U)(function(t){return e.parametros=t,e._changeParametros.next(e.parametros),t}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275inject"](p.eN))},t.\u0275prov=u["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),E=l(25917),y=s.N.urlAPI+"/api/templates_resposta",T=function(){var t=function(){function t(n){e(this,t),this.http=n,this.templates=null,this._changeTemplatesRespostas=new x.X(this.templates),this.getTemplatesRespostas().subscribe(function(e){return null})}return n(t,[{key:"changeTemplatesRespostas",get:function(){return this._changeTemplatesRespostas.asObservable()}},{key:"getTemplatesRespostas",value:function(){var e=this;return this.http.get("".concat(y)).pipe((0,c.U)(function(t){return e.templates=t,e._changeTemplatesRespostas.next(e.templates),t}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275inject"](p.eN))},t.\u0275prov=u["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function I(e,t){if(1&e&&u["\u0275\u0275element"](0,"div",7),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("innerHTML",null==n.template?null:n.template.vResposta,u["\u0275\u0275sanitizeHtml"])}}function A(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"pre",8),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](null==n.template?null:n.template.vResposta)}}function O(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"span"),u["\u0275\u0275text"](2,"PR\xc9VIA: "),u["\u0275\u0275elementStart"](3,"b",2),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](5," \xa0\xa0\xa0 "),u["\u0275\u0275element"](6,"BR"),u["\u0275\u0275text"](7),u["\u0275\u0275template"](8,I,1,1,"div",5),u["\u0275\u0275elementStart"](9,"b"),u["\u0275\u0275template"](10,A,2,1,"pre",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",null==n.template?null:n.template.vAcao," | ",null==n.template?null:n.template.vTemplateResposta,""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n.template||null==n.template.cgC_TranferenciaNavigation?null:n.template.cgC_TranferenciaNavigation.nome_Exibicao," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","Fechar!"==(null==n.template?null:n.template.vAcao)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","Transferir!"==(null==n.template?null:n.template.vAcao))}}function R(e,t){if(1&e&&u["\u0275\u0275element"](0,"div",7),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275property"]("innerHTML",null==n.chamado||null==n.chamado.vTemplateRespostaNavigation?null:n.chamado.vTemplateRespostaNavigation.vResposta,u["\u0275\u0275sanitizeHtml"])}}function k(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"pre",8),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](null==n.chamado||null==n.chamado.vTemplateRespostaNavigation?null:n.chamado.vTemplateRespostaNavigation.vResposta)}}function w(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"span"),u["\u0275\u0275text"](2,"CARIMBADO: "),u["\u0275\u0275elementStart"](3,"b",2),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](5," \xa0\xa0\xa0 "),u["\u0275\u0275element"](6,"BR"),u["\u0275\u0275text"](7),u["\u0275\u0275template"](8,R,1,1,"div",5),u["\u0275\u0275elementStart"](9,"b"),u["\u0275\u0275template"](10,k,2,1,"pre",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",null==n.chamado?null:n.chamado.vAcao," | ",null==n.chamado?null:n.chamado.vTemplateResposta,""),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate1"](" ",null==n.chamado||null==n.chamado.cgC_TranferenciaNavigation?null:n.chamado.cgC_TranferenciaNavigation.nome_Exibicao," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","Fechar!"==(null==n.chamado||null==n.chamado.vTemplateRespostaNavigation?null:n.chamado.vTemplateRespostaNavigation.vAcao)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","Transferir!"==(null==n.chamado||null==n.chamado.vTemplateRespostaNavigation?null:n.chamado.vTemplateRespostaNavigation.vAcao))}}function M(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",1),u["\u0275\u0275template"](1,O,11,5,"div",4),u["\u0275\u0275template"](2,w,11,5,"div",4),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null!=n.template&&null==(null==n.chamado?null:n.chamado.vTemplateResposta)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==n.template||null!=(null==n.chamado?null:n.chamado.vTemplateResposta)||""!=(null==n.chamado?null:n.chamado.vTemplateResposta))}}var N=function(){var t=function(){function t(){e(this,t),this.template=null}return n(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-dados-chamado"]],inputs:{chamado:"chamado",template:"template"},decls:73,vars:26,consts:[[1,"row","margin-top-1em"],[1,"col-md-4","top-linha-cinza"],[1,"blue-font"],["class","col-md-4 top-linha-cinza",4,"ngIf"],[4,"ngIf"],["class","limitar-25em",3,"innerHTML",4,"ngIf"],["class","limitar-25em",4,"ngIf"],[1,"limitar-25em",3,"innerHTML"],[1,"limitar-25em"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275text"](2," Solicitante: "),u["\u0275\u0275elementStart"](3,"b"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](5,"br"),u["\u0275\u0275text"](6," Situa\xe7\xe3o (GECDI): "),u["\u0275\u0275elementStart"](7,"b"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](9,"br"),u["\u0275\u0275text"](10," Abertura: "),u["\u0275\u0275elementStart"](11,"b"),u["\u0275\u0275text"](12),u["\u0275\u0275pipe"](13,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](14,"br"),u["\u0275\u0275text"](15," Vencimento: "),u["\u0275\u0275elementStart"](16,"b"),u["\u0275\u0275text"](17),u["\u0275\u0275pipe"](18,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](19,"br"),u["\u0275\u0275text"](20," Transferir at\xe9: "),u["\u0275\u0275elementStart"](21,"b"),u["\u0275\u0275text"](22),u["\u0275\u0275pipe"](23,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](24,"br"),u["\u0275\u0275text"](25," Atendente: "),u["\u0275\u0275elementStart"](26,"b",2),u["\u0275\u0275text"](27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](28,"br"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"div",1),u["\u0275\u0275text"](30," Tipo: "),u["\u0275\u0275elementStart"](31,"b"),u["\u0275\u0275text"](32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](33,"br"),u["\u0275\u0275text"](34," Ocorrencia: "),u["\u0275\u0275elementStart"](35,"b"),u["\u0275\u0275text"](36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](37,"br"),u["\u0275\u0275text"](38," Natureza: "),u["\u0275\u0275elementStart"](39,"b"),u["\u0275\u0275text"](40),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](41,"br"),u["\u0275\u0275text"](42," Assunto: "),u["\u0275\u0275elementStart"](43,"b"),u["\u0275\u0275text"](44),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](45,"br"),u["\u0275\u0275text"](46," Item: "),u["\u0275\u0275elementStart"](47,"b"),u["\u0275\u0275text"](48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](49,"br"),u["\u0275\u0275text"](50," Motivo: "),u["\u0275\u0275elementStart"](51,"b"),u["\u0275\u0275text"](52),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](53,M,3,2,"div",3),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](54,"div",0),u["\u0275\u0275elementStart"](55,"div",1),u["\u0275\u0275text"](56," Manifesto:"),u["\u0275\u0275element"](57,"br"),u["\u0275\u0275elementStart"](58,"b"),u["\u0275\u0275elementStart"](59,"pre"),u["\u0275\u0275text"](60),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](61,"div",1),u["\u0275\u0275text"](62," Movimentacoes:"),u["\u0275\u0275element"](63,"br"),u["\u0275\u0275elementStart"](64,"b"),u["\u0275\u0275elementStart"](65,"pre"),u["\u0275\u0275text"](66),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](67,"div",1),u["\u0275\u0275text"](68," Comentario:"),u["\u0275\u0275element"](69,"br"),u["\u0275\u0275elementStart"](70,"b"),u["\u0275\u0275elementStart"](71,"pre"),u["\u0275\u0275text"](72),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate2"]("",null==t.chamado?null:t.chamado.vCPF_CNPJ_Solicitante," ",null==t.chamado?null:t.chamado.vNomeSolicitante,""),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vSituacao),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](13,17,null==t.chamado?null:t.chamado.dDataHoraAbertura,"dd/LL/yyyy HH:mm")),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](18,20,null==t.chamado?null:t.chamado.dDataVencimento,"dd/LL/yyyy")),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](23,23,null==t.chamado?null:t.chamado.dDataMaximaTransferencia,"dd/LL/yyyy")),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vApelidoAtendente),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vTipoOrigem),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vTipoOcorrencia),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vNatureza),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vAssunto),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vItem),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vMotivo),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null!=t.template||null!=(null==t.chamado?null:t.chamado.vTemplateResposta)),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vManifesto),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vMovimentacoes),u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](null==t.chamado?null:t.chamado.vComentario))},directives:[o.O5],pipes:[o.uU],styles:["pre[_ngcontent-%COMP%]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.margin-top-1em[_ngcontent-%COMP%]{margin-top:1em}.top-linha-cinza[_ngcontent-%COMP%]{border-top:1px solid gray;margin-left:6px;margin-right:6px;padding:3px}.col-md-4[_ngcontent-%COMP%]{max-width:calc(33.3333333% - 12px)}.col-md-6[_ngcontent-%COMP%]{max-width:calc(50% - 12px)}.limitar-25em[_ngcontent-%COMP%]{max-height:22em;overflow:auto;color:blue}.limitar-25em[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:blue}.blue-font[_ngcontent-%COMP%]{color:blue;font-size:1.2em}"]}),t}(),P=["dialog"],D=["inputTemplateRef"];function _(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"a",12),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.openAtender(null==e.chamado?null:e.chamado.iIdentificacaoChamado)}),u["\u0275\u0275element"](1,"i",13),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate2"](" Chamado ",null==a.chamado?null:a.chamado.vOrigem," N\xba ",null==a.chamado?null:a.chamado.iIdentificacaoChamado," ")}}function F(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"a"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate3"]("Chamado ",null==n.chamado?null:n.chamado.vOrigem," N\xba ",null==n.chamado?null:n.chamado.iIdentificacaoChamado," ",null!=n.chamado&&n.chamado.vWorkOrderID?"( "+(null==n.chamado?null:n.chamado.vWorkOrderID)+" / "+(null==n.chamado?null:n.chamado.vREQ)+" )":"","")}}function V(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",11),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).getPosition(-1)}),u["\u0275\u0275text"](1,"<"),u["\u0275\u0275elementEnd"]()}}function B(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",11),u["\u0275\u0275listener"]("click",function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).getPosition(1)}),u["\u0275\u0275text"](1,">"),u["\u0275\u0275elementEnd"]()}}function U(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",19),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",n),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",n," ")}}function z(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",14),u["\u0275\u0275text"](1," Carimbar com (F6) : "),u["\u0275\u0275elementStart"](2,"input",15,16),u["\u0275\u0275listener"]("ngModelChange",function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).onChangeTemplateResponse(e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"nb-autocomplete",null,17),u["\u0275\u0275template"](6,U,2,2,"nb-option",18),u["\u0275\u0275pipe"](7,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](8,"\xa0\xa0 "),u["\u0275\u0275elementStart"](9,"button",11),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.Carimbar(e.chamado,e.selectedTemplateResponse)}),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](11," \xa0\xa0 "),u["\u0275\u0275elementStart"](12,"button",11),u["\u0275\u0275listener"]("click",function(){u["\u0275\u0275restoreView"](n);var e=u["\u0275\u0275nextContext"](2);return e.desCarimbar(e.chamado)}),u["\u0275\u0275text"](13,"Descarimbar (F8)"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275reference"](5),l=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",l.selectedTemplateResponseString)("nbAutocomplete",a),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind1"](7,4,l.filteredNgModelOptions$)),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("Carimbar ",null==l.selectedTemplateResponse?null:l.selectedTemplateResponse.vAcao," (F7)")}}function j(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"nb-card",2),u["\u0275\u0275elementStart"](1,"nb-card-header"),u["\u0275\u0275template"](2,_,3,2,"a",3),u["\u0275\u0275template"](3,F,2,3,"a",4),u["\u0275\u0275elementStart"](4,"div",5),u["\u0275\u0275template"](5,V,2,0,"button",6),u["\u0275\u0275text"](6),u["\u0275\u0275template"](7,B,2,0,"button",6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"nb-card-body"),u["\u0275\u0275element"](9,"ngx-dados-chamado",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"nb-card-footer"),u["\u0275\u0275template"](11,z,14,6,"div",8),u["\u0275\u0275elementStart"](12,"div",9),u["\u0275\u0275elementStart"](13,"nb-checkbox",10),u["\u0275\u0275listener"]("ngModelChange",function(e){u["\u0275\u0275restoreView"](n);var t=u["\u0275\u0275nextContext"]();return t.changeCheckTratado(t.chamado,e)}),u["\u0275\u0275text"](14,"Ja foi tratado"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"div",5),u["\u0275\u0275elementStart"](16,"button",11),u["\u0275\u0275listener"]("click",function(){return t.dialogRef.close()}),u["\u0275\u0275text"](17,"Fechar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","ATENDER"==(null==a.chamado?null:a.chamado.vOrigem)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","ATENDER"!=(null==a.chamado?null:a.chamado.vOrigem)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",a.position>0),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",a.position+1," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",a.position<a.listaChamados.length),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("chamado",a.chamado)("template",a.selectedTemplateResponse),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","ATENDER"==(null==a.chamado?null:a.chamado.vOrigem)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",null==a.chamado?null:a.chamado.bFoiTratado)}}var L=function(){var t=function(){function t(n,a,l,o,i){var r=this;e(this,t),this.dialogService=n,this.serviceChamado=a,this.serviceTemplateResposta=l,this.serviceSticker=o,this.serviceUser=i,this.templateResponse=new Map,this.templateResponseArray=[],this.selectedTemplateResponseString="",this.selectedTemplateResponse=null,this.ultimoCarimbo="",this.serviceTemplateResposta.changeTemplatesRespostas.subscribe(function(e){(null==e?void 0:e.length)>0&&(r.templateResponse.clear(),e.forEach(function(e){r.templateResponse.set(e.vTemplateResposta,e),r.templateResponseArray.push(e.vTemplateResposta)}),r.filteredNgModelOptions$=(0,E.of)(r.templateResponseArray))})}return n(t,[{key:"ngOnInit",value:function(){}},{key:"filter",value:function(e){var t=e.toLowerCase();return this.templateResponseArray.filter(function(e){return e.toLowerCase().includes(t)})}},{key:"onChangeTemplateResponse",value:function(e){this.templateResponse.has(e)?(this.selectedTemplateResponseString=e,this.selectedTemplateResponse=this.templateResponse.get(e)):this.filteredNgModelOptions$=(0,E.of)(this.filter(e))}},{key:"openDialog",value:function(){var e;this.dialogService.open(this.dialog,{hasScroll:!0,dialogClass:"dialog-class"}),this.selectedTemplateResponseString=null===(e=this.chamado)||void 0===e?void 0:e.vTemplateResposta,this.templateResponse.has(this.selectedTemplateResponseString)&&(this.selectedTemplateResponse=this.templateResponse.get(this.selectedTemplateResponseString))}},{key:"getPosition",value:function(e){var t=this;e<0&&this.position>0?(this.position--,this.serviceChamado.getChamadoById(this.listaChamados[this.position].idChamado).subscribe(function(e){var n,a;t.chamado=e,null!=(null===(n=t.chamado)||void 0===n?void 0:n.vTemplateResposta)&&""!=(null===(a=t.chamado)||void 0===a?void 0:a.vTemplateResposta)||(t.selectedTemplateResponseString=null,t.selectedTemplateResponse=null)})):e>0&&this.position<this.listaChamados.length&&(this.position++,this.serviceChamado.getChamadoById(this.listaChamados[this.position].idChamado).subscribe(function(e){var n,a;t.chamado=e,null!=(null===(n=t.chamado)||void 0===n?void 0:n.vTemplateResposta)&&""!=(null===(a=t.chamado)||void 0===a?void 0:a.vTemplateResposta)||(t.selectedTemplateResponseString=null,t.selectedTemplateResponse=null)}))}},{key:"Carimbar",value:function(e,t){var n=this;null==t&&(this.templateResponse.has(this.selectedTemplateResponseString)?(t=this.templateResponse.get(this.selectedTemplateResponseString),this.selectedTemplateResponse=t,this.selectedTemplateResponseString=t.vTemplateResposta):this.templateResponse.has(this.inputTemplateRef.nativeElement.value)&&(t=this.templateResponse.get(this.inputTemplateRef.nativeElement.value),this.selectedTemplateResponse=t,this.selectedTemplateResponseString=t.vTemplateResposta)),null==t?(this.serviceSticker.show("Escolha o template!","",{status:"danger",duration:5e3}),this.inputTemplateRef.nativeElement.focus()):this.serviceChamado.getCarimbarChamadoById(this.chamado.idChamado,t.vTemplateResposta).subscribe(function(e){n.chamado=e,n.ultimoCarimbo=t.vTemplateResposta,n.selectedTemplateResponse=t,n.selectedTemplateResponseString=t.vTemplateResposta,n.serviceSticker.show("Chamado N\xba ".concat(e.idChamado," Carimbado com a a\xe7\xe3o '").concat(t.vTemplateResposta,"' com sucesso"),"",{status:"success"})},function(e){n.serviceSticker.show("Chamado N\xba ".concat(n.chamado.idChamado," com erro na carimba\xe7\xe3o: ").concat(JSON.stringify(e,null,0)),"",{status:"danger",duration:5e3})})}},{key:"desCarimbar",value:function(e){var t=this;this.selectedTemplateResponseString=null,this.selectedTemplateResponse=null,this.serviceChamado.getDesCarimbarChamadoById(this.chamado.idChamado).subscribe(function(e){t.chamado=e,t.serviceSticker.show("Chamado N\xba ".concat(e.idChamado," descarimbado com sucesso"),"",{status:"success"})},function(e){t.serviceSticker.show("Chamado N\xba ".concat(t.chamado.idChamado," com erro na descarimba\xe7\xe3o: ").concat(JSON.stringify(e,null,0)),"",{status:"danger",duration:5e3})})}},{key:"changeCheckTratado",value:function(e,t){var n=this;e.bFoiTratado=t,this.serviceChamado.putTratarChamadoById(e.idChamado,t,this.serviceUser.currentUser.apelidoAtendente).subscribe(function(a){a.bFoiTratado==t?(n.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," marcado como ").concat((null==e?void 0:e.bFoiTratado)?"TRATADO":"N\xc3O TRATADO"),"",{status:"success"}),n.listaChamados[n.position].bFoiTratado=a.bFoiTratado,n.callbackMark(n.position,a.bFoiTratado)):n.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," com erro na marca\xe7\xe3o de tratamento"),"",{status:"danger",duration:5e3})},function(t){return n.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," com erro na marca\xe7\xe3o de tratamento: ").concat(JSON.stringify(t,null,0)),"",{status:"danger",duration:5e3})})}},{key:"handleKeyboardEvent",value:function(e){if(!e.ctrlKey||"ArrowRight"!=e.key&&"ArrowDown"!=e.key)if(!e.ctrlKey||"ArrowLeft"!=e.key&&"ArrowUp"!=e.key)if(e.ctrlKey&&"F"==e.key)this.dialog.close();else if("F6"==e.key)this.inputTemplateRef.nativeElement.focus();else if("F7"==e.key){var t;null==this.selectedTemplateResponseString||""==this.selectedTemplateResponseString?this.templateResponse.has(this.ultimoCarimbo)&&(t=this.templateResponse.get(this.ultimoCarimbo)):t=this.selectedTemplateResponse,this.Carimbar(this.chamado,t)}else"F8"==e.key&&this.desCarimbar(this.chamado);else this.getPosition(-1);else this.getPosition(1)}},{key:"openAtender",value:function(e){m("https://atender.caixa/siouv/jsp/login/DetalharOcorrencia.do",{sequencialOcorrencia:e,method:"iniciarDetalhamentoEnviadas",perfilUsuario:"gestor",escopo:"I",sequencialTipoOcorrencia:"2",situacao:"Enviada",sequencialFase:"2",gravaHistorico:"S",paginaVoltar:"ListaOcorrenciasResponder",ordenacaoOuvidoria:"3",ordenacaoSac:"3",ordenacaoInterna:"3",tipoOrdenacaoOuvidoria:"DESC",tipoOrdenacaoSac:"DESC",tipoOrdenacaoInterna:"DESC"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](r.Gln),u["\u0275\u0275directiveInject"](g),u["\u0275\u0275directiveInject"](T),u["\u0275\u0275directiveInject"](r.quB),u["\u0275\u0275directiveInject"](C.K))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-dialog-chamado"]],viewQuery:function(e,t){var n;(1&e&&(u["\u0275\u0275viewQuery"](P,5),u["\u0275\u0275viewQuery"](D,5)),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.dialog=n.first),u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.inputTemplateRef=n.first))},hostBindings:function(e,t){1&e&&u["\u0275\u0275listener"]("keydown",function(e){return t.handleKeyboardEvent(e)},!1,u["\u0275\u0275resolveDocument"])},inputs:{chamado:"chamado",position:"position",listaChamados:"listaChamados",callbackMark:"callbackMark"},decls:2,vars:0,consts:[["class","template-chamado"],["dialog",""],[1,"dialog-card"],["class","no-wrap hand",3,"click",4,"ngIf"],[4,"ngIf"],[1,"float-right"],["nbButton","",3,"click",4,"ngIf"],[3,"chamado","template"],["class","float-left",4,"ngIf"],[1,"align-middle","margin-left-2em"],["status","primary",3,"ngModel","ngModelChange"],["nbButton","",3,"click"],[1,"no-wrap","hand",3,"click"],[1,"fas","fa-external-link-alt"],[1,"float-left"],["nbInput","","type","text","placeholder","Escolha o template de Resposta",1,"input-template",3,"ngModel","nbAutocomplete","ngModelChange"],["inputTemplateRef",""],["autoChoiceTemplateRespose",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&u["\u0275\u0275template"](0,j,18,9,"ng-template",0,1,u["\u0275\u0275templateRefExtractor"])},directives:[r.Asz,r.ndF,o.O5,r.yKW,N,r.XWE,r.NTf,i.JJ,i.On,r.DPz,r.h8i,i.Fj,r.wNd,r.Xh,o.sg,r.q51],pipes:[o.Ov],styles:["nb-card[_ngcontent-%COMP%]{max-height:90vh;max-width:90vw;min-height:90vh;min-width:90vw}.input-template[_ngcontent-%COMP%]{min-width:20rem}.hand[_ngcontent-%COMP%]{cursor:pointer}.margin-left-2em[_ngcontent-%COMP%]{margin-left:2em}"]}),t}(),$=["diag"];function H(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",29),u["\u0275\u0275element"](1,"nb-user",30),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("name",n.Apelido),u["\u0275\u0275propertyInterpolate2"]("title","",n.Chamados," Ch | ",n.Ouvidorias," Ouv"),u["\u0275\u0275propertyInterpolate"]("badgeText",n.Total),u["\u0275\u0275propertyInterpolate"]("picture",n.UrlAvatar)}}function q(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"nb-option",31),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275property"]("value",null==n?null:n.vApelidoAtendente),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",null==n?null:n.vApelidoAtendente," ")}}function K(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"a",40),u["\u0275\u0275element"](1,"i",41),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",null==n?null:n.iIdentificacaoChamado,"")}}function J(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"a"),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]().$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](null==n?null:n.iIdentificacaoChamado)}}function G(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"tr",32),u["\u0275\u0275elementStart"](1,"th",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index,l=u["\u0275\u0275nextContext"]();return"ATENDER"==(null==t?null:t.vOrigem)?l.openAtender(null==t?null:t.iIdentificacaoChamado):l.detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275template"](2,K,3,1,"a",34),u["\u0275\u0275template"](3,J,2,1,"a",35),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"td",36),u["\u0275\u0275elementStart"](5,"nb-checkbox",37),u["\u0275\u0275listener"]("ngModelChange",function(e){var t=u["\u0275\u0275restoreView"](n).$implicit;return u["\u0275\u0275nextContext"]().changeCheckTratado(t,e)}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"td",38),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](13),u["\u0275\u0275pipe"](14,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](16),u["\u0275\u0275pipe"](17,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](19),u["\u0275\u0275pipe"](20,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"td",39),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"td",39),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](26),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](27,"td",33),u["\u0275\u0275listener"]("click",function(){var e=u["\u0275\u0275restoreView"](n),t=e.$implicit,a=e.index;return u["\u0275\u0275nextContext"]().detalheChamado(null==t?null:t.idChamado,a)}),u["\u0275\u0275text"](28),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var a=t.$implicit,l=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("ngClass",l.checkRow(a)+" hand"),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","ATENDER"==(null==a?null:a.vOrigem)),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","ATENDER"!=(null==a?null:a.vOrigem)),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngModel",null==a?null:a.bFoiTratado),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==a?null:a.vOrigem),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"]((null==a?null:a.vCPF_CNPJ_Solicitante)||""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==a?null:a.vNomeSolicitante),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](14,20,null==a?null:a.dDataHoraAbertura,"dd/LL/yyyy HH:mm")),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](17,23,null==a?null:a.dDataVencimento,"dd/LL/yyyy")),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](20,26,null==a?null:a.dDataMaximaTransferencia,"dd/LL/yyyy")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngClass",l.checkCellTransferir(a)+" no-wrap"),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate"](null==a?null:a.vSituacaoGECDI),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("",null!=a&&a.vAcao?(null==a?null:a.vAcao)+" | "+(null==a?null:a.vTemplateResposta):""," "),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngClass",l.checkCell(a)),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate5"]("",null==a?null:a.vTipoOcorrencia," | ",null==a?null:a.vNatureza," | ",null==a?null:a.vAssunto," | ",null==a?null:a.vMotivo," | ",null==a?null:a.vItem,""),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](null==a?null:a.vApelidoAtendente)}}var Q,W=s.N.urlAPI+"/api/user",X=function(){var t=function(){function t(n,a,l,o,i){var r=this;e(this,t),this.serviceAtendentes=n,this.serviceChamados=a,this.serviceUser=l,this.serviceParametros=o,this.serviceSticker=i,this.apelidoAtendente="",this.chamadoAtual=null,this.parametros=null,this.estatisticas=new Y,this.estatisticasAtendentes=new Array,this.posicao=0,this.idPrimeiroChamado=-1,this.serviceUser.changeUser().subscribe(function(e){e&&(1==e.user.role&&(r.apelidoAtendente="<Todos>"),r.atendentes=n.getAtendentes().pipe((0,c.U)(function(e){return r.onChange(r.apelidoAtendente),e})))})}return n(t,[{key:"onChange",value:function(e){this.apelidoAtendente=e,this.syncList()}},{key:"syncList",value:function(){var e=this;this.chamados=this.serviceChamados.getChamados(!0,null,null,this.apelidoAtendente,null,null,null,null,null,"minimo").pipe((0,c.U)(function(t,n){t.length>0&&(e.idPrimeiroChamado=t[0].idChamado);var a=new Y,l=new Map,o=new Map;return t.forEach(function(e){if(a.TotalChamados++,"ATENDER"==e.vOrigem?a.TotalChamadosAtender++:a.TotalChamadosServicos++,"OUVIDORIA"==(null==e?void 0:e.vTipoOcorrencia)&&a.Ouvidorias++,/venc/gi.test(e.vSituacaoGECDI)&&(a.ChamadosVencidosOuVencendo++,"OUVIDORIA"==(null==e?void 0:e.vTipoOcorrencia)&&a.OuvidoriasVencendo++),/\xfaltimo dia/gi.test(e.vSituacaoGECDI)&&a.ChamadosUltimoDiaTransferir++,/n\xe3o transf/gi.test(e.vSituacaoGECDI)&&a.ChamadosNaoTransferir++,e&&""!=(null==e?void 0:e.vApelidoAtendente)&&null!=(null==e?void 0:e.vApelidoAtendente)){if(a.ChamadosAtribuidos++,l.has(e.vApelidoAtendente)?l.set(e.vApelidoAtendente,l.get(e.vApelidoAtendente)+1):l.set(e.vApelidoAtendente,1),!o.has(e.vApelidoAtendente)){var t=new Z;t.Apelido=e.vApelidoAtendente,t.Matricula=e.cUsuario,t.UrlAvatar="".concat(W,"/").concat(e.cUsuario,"/avatar"),o.set(e.vApelidoAtendente,t)}var n=o.get(e.vApelidoAtendente);(null==e?void 0:e.bFoiTratado)||("OUVIDORIA"==(null==e?void 0:e.vTipoOcorrencia)?n.Ouvidorias++:n.Chamados++,n.Total++),o.set(e.vApelidoAtendente,n)}else a.ChamadosNaoAtribuidos++}),a.Atendentes=l.size,e.estatisticas=a,e.listaFisicaChamados=t,e.estatisticasAtendentes=new Array,o.forEach(function(t,n){return e.estatisticasAtendentes.push(t)}),e.estatisticasAtendentes=e.estatisticasAtendentes.sort(function(e,t){return t.Total-e.Total}),t})),this.serviceParametros.getPatametros().subscribe(function(t){e.parametros=t})}},{key:"detalheChamado",value:function(e,t){this.chamadoAtual=this.serviceChamados.getChamadoById(e),this.posicao=t,this.dialog.openDialog()}},{key:"checkRow",value:function(e){return e.bFoiTratado?"row-green ":/venc/gi.test(e.vSituacaoGECDI)?"row-red ":/ouvidoria/gi.test(e.vTipoOcorrencia)?"row-blue":void 0}},{key:"checkCellTransferir",value:function(e){return e.bFoiTratado?"row-green ":/n\xe3o tran/gi.test(e.vSituacaoGECDI)?"cell-nao-transferir":/\xfaltimo dia/gi.test(e.vSituacaoGECDI)?"cell-ultimo-dia-transferir":void 0}},{key:"checkCell",value:function(e){if("OUVIDORIA"==(null==e?void 0:e.vTipoOcorrencia))return"row-blue"}},{key:"handleKeyboardEvent",value:function(e){"F2"==e.key&&this.idPrimeiroChamado>0&&(this.chamadoAtual=this.serviceChamados.getChamadoById(this.idPrimeiroChamado),this.posicao=0,this.dialog.openDialog())}},{key:"changeCheckTratado",value:function(e,t){var n,a,l=this;e.bFoiTratado=t,this.serviceChamados.putTratarChamadoById(e.idChamado,t,null===(a=null===(n=this.serviceUser)||void 0===n?void 0:n.currentUser)||void 0===a?void 0:a.apelidoAtendente).subscribe(function(n){n.bFoiTratado==t?l.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," marcado como ").concat((null==e?void 0:e.bFoiTratado)?"TRATADO":"N\xc3O TRATADO"),"",{status:"success"}):l.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," com erro na marca\xe7\xe3o de tratamento"),"",{status:"danger",duration:5e3})},function(t){return l.serviceSticker.show("Chamado N\xba ".concat(null==e?void 0:e.idChamado," com erro na marca\xe7\xe3o de tratamento: ").concat(JSON.stringify(t,null,0)),"",{status:"danger",duration:5e3})})}},{key:"positionTratado",value:function(e,t){this.listaFisicaChamados[e].bFoiTratado=t}},{key:"ngOnInit",value:function(){}},{key:"openAtender",value:function(e){m("https://atender.caixa/siouv/jsp/login/DetalharOcorrencia.do",{sequencialOcorrencia:e,method:"iniciarDetalhamentoEnviadas",perfilUsuario:"gestor",escopo:"I",sequencialTipoOcorrencia:"2",situacao:"Enviada",sequencialFase:"2",gravaHistorico:"S",paginaVoltar:"ListaOcorrenciasResponder",ordenacaoOuvidoria:"3",ordenacaoSac:"3",ordenacaoInterna:"3",tipoOrdenacaoOuvidoria:"DESC",tipoOrdenacaoSac:"DESC",tipoOrdenacaoInterna:"DESC"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](v),u["\u0275\u0275directiveInject"](g),u["\u0275\u0275directiveInject"](C.K),u["\u0275\u0275directiveInject"](S),u["\u0275\u0275directiveInject"](r.quB))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["ngx-atendimento"]],viewQuery:function(e,t){var n;(1&e&&u["\u0275\u0275viewQuery"]($,5),2&e)&&(u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.dialog=n.first))},hostBindings:function(e,t){1&e&&u["\u0275\u0275listener"]("keydown",function(e){return t.handleKeyboardEvent(e)},!1,u["\u0275\u0275resolveDocument"])},decls:127,vars:30,consts:[[1,"row"],[1,"col-md-12"],[1,"col-lg-3","col-md-6","col-sm-6"],[1,"card","card-stats"],[1,"card-body"],[1,"col-3","col-md-2"],[1,"icon-big","text-center","icon-warning"],[1,"fas","fa-users","fa-3x","blue"],[1,"col-9","col-md-10"],[1,"numbers"],[1,"card-category"],[1,"card-title"],[1,"numero-grande"],[1,"fas","fa-list-ul","fa-3x","blue"],[1,"fas","fa-exclamation","fa-3x","red"],[1,"far","fa-clock","fa-3x","red"],["icon","headphones-outline","pack","eva",1,"font-2_25rem"],["class","col-lg-2 col-md-3 col-sm-4 margin-2-bt",4,"ngFor","ngForOf"],["placeholder","Atendente",1,"select-atendente",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["nbButton","",3,"click"],[1,"fas","fa-sync"],[1,"float-right"],[1,"table"],[1,"row-title"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"chamado","position","listaChamados","callbackMark"],["diag",""],[1,"col-lg-2","col-md-3","col-sm-4","margin-2-bt"],["size","large","badgeStatus","success","badgePosition","bottom right",3,"name","title","badgeText","picture"],[3,"value"],[3,"ngClass"],["scope","row",3,"click"],["class","no-wrap",4,"ngIf"],[4,"ngIf"],["scope","row"],["status","primary",3,"ngModel","ngModelChange"],["scope","row",1,"no-wrap",3,"click"],["scope","row",3,"ngClass","click"],[1,"no-wrap"],[1,"fas","fa-external-link-alt"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",0),u["\u0275\u0275elementStart"](3,"div",2),u["\u0275\u0275elementStart"](4,"div",3),u["\u0275\u0275elementStart"](5,"div",4),u["\u0275\u0275elementStart"](6,"div",0),u["\u0275\u0275elementStart"](7,"div",5),u["\u0275\u0275elementStart"](8,"div",6),u["\u0275\u0275element"](9,"i",7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"div",8),u["\u0275\u0275elementStart"](11,"div",9),u["\u0275\u0275elementStart"](12,"p",10),u["\u0275\u0275text"](13,"Atendentes"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"p",11),u["\u0275\u0275elementStart"](15,"b",12),u["\u0275\u0275text"](16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"div",2),u["\u0275\u0275elementStart"](19,"div",3),u["\u0275\u0275elementStart"](20,"div",4),u["\u0275\u0275elementStart"](21,"div",0),u["\u0275\u0275elementStart"](22,"div",5),u["\u0275\u0275elementStart"](23,"div",6),u["\u0275\u0275element"](24,"i",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",8),u["\u0275\u0275elementStart"](26,"div",9),u["\u0275\u0275elementStart"](27,"p",10),u["\u0275\u0275text"](28,"Chamados"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"p",11),u["\u0275\u0275elementStart"](30,"b",12),u["\u0275\u0275text"](31),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"div",2),u["\u0275\u0275elementStart"](34,"div",3),u["\u0275\u0275elementStart"](35,"div",4),u["\u0275\u0275elementStart"](36,"div",0),u["\u0275\u0275elementStart"](37,"div",5),u["\u0275\u0275elementStart"](38,"div",6),u["\u0275\u0275element"](39,"i",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"div",8),u["\u0275\u0275elementStart"](41,"div",9),u["\u0275\u0275elementStart"](42,"p",10),u["\u0275\u0275text"](43,"Ouvidorias"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](44,"p",11),u["\u0275\u0275elementStart"](45,"b",12),u["\u0275\u0275text"](46),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](47),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](48,"div",2),u["\u0275\u0275elementStart"](49,"div",3),u["\u0275\u0275elementStart"](50,"div",4),u["\u0275\u0275elementStart"](51,"div",0),u["\u0275\u0275elementStart"](52,"div",5),u["\u0275\u0275elementStart"](53,"div",6),u["\u0275\u0275element"](54,"i",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](55,"div",8),u["\u0275\u0275elementStart"](56,"div",9),u["\u0275\u0275elementStart"](57,"p",10),u["\u0275\u0275text"](58,"Vencido/Vencer"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](59,"p",11),u["\u0275\u0275elementStart"](60,"b",12),u["\u0275\u0275text"](61),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](62),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](63,"nb-card"),u["\u0275\u0275elementStart"](64,"nb-card-header"),u["\u0275\u0275elementStart"](65,"h1"),u["\u0275\u0275element"](66,"nb-icon",16),u["\u0275\u0275text"](67," Atendimento - Resumo por atendente"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](68,"nb-card-body"),u["\u0275\u0275elementStart"](69,"div",0),u["\u0275\u0275template"](70,H,2,5,"div",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](71,"nb-card"),u["\u0275\u0275elementStart"](72,"nb-card-header"),u["\u0275\u0275text"](73," Chamados - Atendente: "),u["\u0275\u0275elementStart"](74,"nb-select",18),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.onChange(e)}),u["\u0275\u0275template"](75,q,2,2,"nb-option",19),u["\u0275\u0275pipe"](76,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275text"](77," \xa0\xa0"),u["\u0275\u0275elementStart"](78,"button",20),u["\u0275\u0275listener"]("click",function(){return t.syncList()}),u["\u0275\u0275element"](79,"i",21),u["\u0275\u0275text"](80,"\xa0Atualizar"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](81,"nb-card-body"),u["\u0275\u0275elementStart"](82,"div",22),u["\u0275\u0275text"](83,"Atualizado at\xe9 "),u["\u0275\u0275elementStart"](84,"b"),u["\u0275\u0275text"](85),u["\u0275\u0275pipe"](86,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](87,"table",23),u["\u0275\u0275elementStart"](88,"thead",24),u["\u0275\u0275elementStart"](89,"tr"),u["\u0275\u0275elementStart"](90,"td",25),u["\u0275\u0275text"](91,"Numero"),u["\u0275\u0275element"](92,"br"),u["\u0275\u0275text"](93,"Ocorr\xeancia"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](94,"td",25),u["\u0275\u0275text"](95,"Trat."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](96,"td",25),u["\u0275\u0275text"](97,"Sistema"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](98,"td",25),u["\u0275\u0275text"](99,"CPF"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](100,"td",25),u["\u0275\u0275text"](101,"Cliente"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](102,"td",25),u["\u0275\u0275text"](103,"Abertura"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](104,"td",25),u["\u0275\u0275text"](105,"Vencimento"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](106,"td",25),u["\u0275\u0275text"](107,"Prazo"),u["\u0275\u0275element"](108,"br"),u["\u0275\u0275text"](109,"Transf."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](110,"td",25),u["\u0275\u0275text"](111,"Situa\xe7\xe3o"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](112,"td",25),u["\u0275\u0275text"](113,"A\xe7\xe3o"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](114,"td",25),u["\u0275\u0275text"](115,"Categoriza\xe7\xe3o"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](116,"td",25),u["\u0275\u0275text"](117,"Atendente"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](118,"tbody"),u["\u0275\u0275template"](119,G,29,29,"tr",26),u["\u0275\u0275pipe"](120,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](121,"nb-card-footer"),u["\u0275\u0275text"](122," Footer "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](123,"ngx-dialog-chamado",27,28),u["\u0275\u0275pipe"](125,"async"),u["\u0275\u0275pipe"](126,"async")),2&e&&(u["\u0275\u0275advance"](16),u["\u0275\u0275textInterpolate"](null==t.estatisticas?null:t.estatisticas.Atendentes),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" | ",null==t.estatisticas?null:t.estatisticas.ChamadosAtribuidos," atribu\xeddos / ",null==t.estatisticas?null:t.estatisticas.TotalChamadosServicos," n\xe3o atribu\xeddos "),u["\u0275\u0275advance"](14),u["\u0275\u0275textInterpolate"](null==t.estatisticas?null:t.estatisticas.TotalChamados),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate2"](" | ",null==t.estatisticas?null:t.estatisticas.TotalChamadosAtender," atender / ",null==t.estatisticas?null:t.estatisticas.TotalChamadosServicos," WO servi\xe7o "),u["\u0275\u0275advance"](14),u["\u0275\u0275textInterpolate"](null==t.estatisticas?null:t.estatisticas.Ouvidorias),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" | ",null==t.estatisticas?null:t.estatisticas.OuvidoriasVencendo," ouvidorias vencendo "),u["\u0275\u0275advance"](14),u["\u0275\u0275textInterpolate"](null==t.estatisticas?null:t.estatisticas.ChamadosVencidosOuVencendo),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" | ",null==t.estatisticas?null:t.estatisticas.ChamadosUltimoDiaTransferir," que podem transferir hoje "),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngForOf",t.estatisticasAtendentes),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngModel",t.apelidoAtendente),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind1"](76,19,t.atendentes)),u["\u0275\u0275advance"](10),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind2"](86,21,null==t.parametros?null:t.parametros.dDataHoraAtualizacao,"dd/LL/yyyy HH:mm")),u["\u0275\u0275advance"](34),u["\u0275\u0275property"]("ngForOf",u["\u0275\u0275pipeBind1"](120,24,t.chamados)),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("chamado",u["\u0275\u0275pipeBind1"](125,26,t.chamadoAtual))("position",t.posicao)("listaChamados",u["\u0275\u0275pipeBind1"](126,28,t.chamados))("callbackMark",t.positionTratado))},directives:[r.Asz,r.ndF,r.fMN,r.yKW,o.sg,r.rs,i.JJ,i.On,r.DPz,r.XWE,L,r.k0$,r.q51,o.mk,o.O5,r.NTf],pipes:[o.Ov,o.uU],styles:[".select-atendente[_ngcontent-%COMP%]{width:12em}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}.row-red[_ngcontent-%COMP%]{background-color:red;color:#ff0}.row-blue[_ngcontent-%COMP%]{background-color:blue;color:#fff}.row-green[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.row-title[_ngcontent-%COMP%]{background-color:#000;color:#fff}.cell-nao-transferir[_ngcontent-%COMP%]{background-color:gold;color:#000;font-weight:700}.cell-ultimo-dia-transferir[_ngcontent-%COMP%]{background-color:#ff0;color:#000;font-weight:700}.hand[_ngcontent-%COMP%]{cursor:pointer}.numero-grande[_ngcontent-%COMP%]{font-size:3em}.card-category[_ngcontent-%COMP%]{font-size:2em}.row[_ngcontent-%COMP%]{margin-bottom:1em}.red[_ngcontent-%COMP%]{color:red}.blue[_ngcontent-%COMP%]{color:blue}.margin-2-bt[_ngcontent-%COMP%]{margin-bottom:1em}.user-name[_nghost-%COMP%], .user-name   [_nghost-%COMP%]{font-weight:700}.font-2_25rem[_ngcontent-%COMP%]{font-size:2.25rem}"]}),t}(),Y=function t(){e(this,t),this.TotalChamados=0,this.TotalChamadosAtender=0,this.TotalChamadosServicos=0,this.Ouvidorias=0,this.OuvidoriasVencendo=0,this.ChamadosVencidosOuVencendo=0,this.ChamadosUltimoDiaTransferir=0,this.ChamadosNaoTransferir=0,this.ChamadosAtribuidos=0,this.ChamadosNaoAtribuidos=0,this.Atendentes=0},Z=function t(){e(this,t),this.Apelido="",this.Matricula="",this.UrlAvatar="",this.Ouvidorias=0,this.Chamados=0,this.Total=0},ee=[{path:"",component:X}],te=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[d.Bz.forChild(ee)],d.Bz]}),t}(),ne={duration:1500,position:r.d6C.BOTTOM_END,destroyByClick:!0,preventDuplicates:!0,status:"success"},ae=((Q=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Q)},Q.\u0275mod=u["\u0275\u0275defineNgModule"]({type:Q}),Q.\u0275inj=u["\u0275\u0275defineInjector"]({imports:[[o.ez,te,i.u5,r.zyh,r.CG_,r.IIj,r.nKr,r.T2N,r.MfT,r.MfT,r.AE1,r.LW9.forRoot(ne),r.KdK]]}),Q)}}])}();