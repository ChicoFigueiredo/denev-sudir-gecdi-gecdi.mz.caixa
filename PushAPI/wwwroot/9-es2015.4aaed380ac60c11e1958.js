(self.webpackChunkgecdi_mz_caixa=self.webpackChunkgecdi_mz_caixa||[]).push([[9],{53009:function(e,t,n){"use strict";n.r(t),n.d(t,{GecdiModule:function(){return p}});var i=n(38583),o=n(99763),r=n(89530),c=n(37716),s=n(88020),a=n(6405),u=n(82008);let l=(()=>{class e{constructor(e){this.menu=r.U,e.changeMenu().subscribe(e=>this.menu=e)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.h))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ngx-gecdi"]],decls:3,vars:1,consts:[[3,"items"]],template:function(e,t){1&e&&(c.TgZ(0,"ngx-one-column-layout"),c._UZ(1,"nb-menu",0),c._UZ(2,"router-outlet"),c.qZA()),2&e&&(c.xp6(1),c.Q6J("items",t.menu))},directives:[a.s,u.mBz,o.lC],styles:[""]}),e})();var d=n(4357),g=n(76622);const h=[{path:"",component:l,children:[{path:"dashboard",canActivate:[d.a],loadChildren:()=>n.e(805).then(n.bind(n,92805)).then(e=>e.DashboardModule)},{path:"push",canActivate:[d.a],loadChildren:()=>n.e(849).then(n.bind(n,40849)).then(e=>e.PushModule)},{path:"atendimento",canActivate:[d.a],loadChildren:()=>n.e(837).then(n.bind(n,34837)).then(e=>e.AtendimentoModule)},{path:"security",loadChildren:()=>n.e(266).then(n.bind(n,40266)).then(e=>e.SecurityModule)},{path:"",redirectTo:"dashboard",pathMatch:"full"}]},{path:"cadastro-usuarios",component:g.m}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[o.Bz.forChild(h)],o.Bz]}),e})();var f=n(10027);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,Z,u.j5J,f.O]]}),e})()},76622:function(e,t,n){"use strict";n.d(t,{m:function(){return h}});var i=n(92340),o=n(37716),r=n(88020),c=n(88182),s=n(82008),a=n(3679),u=n(38583);function l(e,t){if(1&e&&(o.TgZ(0,"nb-option",24),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e.idRole),o.xp6(1),o.Oqu(e.nome_Role)}}function d(e,t){if(1&e&&(o.TgZ(0,"nb-option",24),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e.idRole),o.xp6(1),o.Oqu(e.nome_Role)}}function g(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"tr",25),o.TgZ(1,"th",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o._uU(2),o.qZA(),o.TgZ(3,"td",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o._uU(4),o.qZA(),o.TgZ(5,"td",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o._uU(6),o.qZA(),o.TgZ(7,"td",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o._uU(8),o.qZA(),o.TgZ(9,"td",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o.TgZ(10,"nb-select",27,28),o.NdJ("ngModelChange",function(e){return t.$implicit.idRole=e})("selectedChange",function(t){const n=o.CHM(e).$implicit;return o.oxw().ChangeRole(n.idUsuario,t)}),o.YNc(12,d,2,2,"nb-option",13),o.qZA(),o.qZA(),o.TgZ(13,"td",26),o.NdJ("click",function(){const t=o.CHM(e).index,n=o.oxw();return n.rowClick(n.s,t)}),o.TgZ(14,"button",29),o.NdJ("click",function(){const t=o.CHM(e).$implicit;return o.oxw().excluirUsuario(t)}),o._UZ(15,"nb-icon",30),o.qZA(),o.qZA(),o.qZA()}if(2&e){const e=t.$implicit,n=o.oxw();o.Q6J("ngClass",n.checkRow(e)+" hand"),o.xp6(2),o.Oqu(null==e?null:e.idUsuario),o.xp6(2),o.Oqu(null==e?null:e.cUsuario),o.xp6(2),o.Oqu(null==e?null:e.nome),o.xp6(2),o.Oqu(null==e?null:e.cgc),o.xp6(2),o.Q6J("ngModel",e.idRole),o.xp6(2),o.Q6J("ngForOf",n.userService.roles)}}let h=(()=>{class e{constructor(e,t,n){this.menuService=e,this.userService=t,this.serviceSticker=n,this.menu=[],this.matricula=null,this.role=6,e.changeMenu().subscribe(e=>this.menu=e),this.userService.getRoles().subscribe(e=>this.roles=e),this.usuariosSelecionados=this.userService.getUsers(i.N.itemsPadrao,"")}ngOnInit(){}checkRow(e){}rowClick(e){}Search(e){this.usuariosSelecionados=this.userService.getUsers(i.N.itemsPadrao,e)}excluirUsuario(e){this.userService.deleteUser(e.idUsuario).subscribe(t=>{this.serviceSticker.show(`Usuario ${null==e?void 0:e.cUsuario} (${null==e?void 0:e.nome}) excluido com sucesso`,"",{status:"success",duration:2e3}),this.Search(this.searchText)},t=>{200!=t.status&&(this.serviceSticker.show(`Erro ao excluir ${null==e?void 0:e.cUsuario} (${null==e?void 0:e.nome})`,"",{status:"danger",duration:5e3}),this.Search(this.searchText))})}Cadastrar(){this.userService.postNewUser(this.matricula,this.role).subscribe(e=>{this.serviceSticker.show(`Usuario ${null==e?void 0:e.cUsuario} (${null==e?void 0:e.nome}) incluido com sucesso`,"",{status:"success",duration:2e3}),this.Search(this.matricula)},e=>{200!=e.status&&(this.serviceSticker.show(`Erro ao incluir ${this.matricula} - ${e.message}`,"",{status:"danger",duration:5e3}),this.Search(this.searchText))})}ChangeRole(e,t){this.userService.postChangeRole(e,t).subscribe(e=>{this.serviceSticker.show(`Usuario ${null==e?void 0:e.cUsuario} (${null==e?void 0:e.nome}) alterado para role ${null==e?void 0:e.idRole}`,"",{status:"success",duration:2e3})},e=>{200!=e.status&&this.serviceSticker.show(`Erro ao alterar a role ${this.matricula} - ${e.message}`,"",{status:"danger",duration:5e3})})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.h),o.Y36(c.K),o.Y36(s.quB))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ngx-cadastro-usuarios"]],decls:66,vars:8,consts:[[1,"row"],[1,"col-md-3","col-lg-3","col-xxxl-3"],[1,"form-group"],["nbInput","","id","searchQuery","placeholder","Busca por matricula ou nome","width","30",3,"ngModel","ngModelChange","keyup.enter"],["q",""],["nbSuffix","","nbButton","","ghost","",3,"click"],["pack","eva",3,"icon"],[1,"col-md-9","col-lg-9","col-xxxl-9"],[1,"col-sm-3"],["for","Matricula",1,"label"],["type","text","nbInput","","fullWidth","","id","matricula","placeholder","Matricula (c999999 ou p999999 ou f999999)",3,"ngModel","ngModelChange"],["for","role",1,"label"],["fullWidth","","id","role","name","role",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-2"],["for","btnCadastrar",1,"label"],["fullWidth","","nbButton","","id","btnCadastrar",3,"click"],[1,"fas","fa-user"],[1,"col-sm-12"],["icon","person-add-outline","pack","eva",1,"font-2_25rem"],[1,"table"],[1,"row-title"],["scope","col"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass"],["scope","row",1,"no-wrap",3,"click"],["fullWidth","","id","role","name","role",3,"ngModel","ngModelChange","selectedChange"],["SelRole",""],["nbButton","","ghost","",3,"click"],["icon","trash","pack","eva","status","danger"]],template:function(e,t){if(1&e){const e=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"nb-card"),o.TgZ(3,"nb-card-header"),o._uU(4," Busca de Usu\xe1rio "),o.qZA(),o.TgZ(5,"nb-card-body"),o.TgZ(6,"div",2),o.TgZ(7,"nb-form-field"),o.TgZ(8,"input",3,4),o.NdJ("ngModelChange",function(e){return t.searchText=e})("keyup.enter",function(){o.CHM(e);const n=o.MAs(9);return t.Search(n.value)}),o.qZA(),o.TgZ(10,"button",5),o.NdJ("click",function(){o.CHM(e);const n=o.MAs(9);return t.Search(n.value)}),o._UZ(11,"nb-icon",6),o.qZA(),o.qZA(),o._UZ(12,"BR"),o._UZ(13,"BR"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(14,"div",7),o.TgZ(15,"nb-card"),o.TgZ(16,"nb-card-header"),o._uU(17," Cadastro R\xe1pido de Usu\xe1rio "),o.qZA(),o.TgZ(18,"nb-card-body"),o.TgZ(19,"div",0),o.TgZ(20,"div",8),o.TgZ(21,"div",2),o.TgZ(22,"nb-form-field"),o.TgZ(23,"div",2),o.TgZ(24,"label",9),o._uU(25,"Matricula:"),o.qZA(),o.TgZ(26,"input",10),o.NdJ("ngModelChange",function(e){return t.matricula=e}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(27,"div",8),o.TgZ(28,"div",2),o.TgZ(29,"label",11),o._uU(30,"Role:"),o.qZA(),o.TgZ(31,"nb-select",12),o.NdJ("ngModelChange",function(e){return t.role=e}),o.YNc(32,l,2,2,"nb-option",13),o.qZA(),o.qZA(),o.qZA(),o.TgZ(33,"div",14),o.TgZ(34,"div",2),o.TgZ(35,"label",15),o._uU(36,"\xa0"),o.qZA(),o.TgZ(37,"button",16),o.NdJ("click",function(){return t.Cadastrar()}),o._UZ(38,"i",17),o._uU(39,"\xa0Cadastrar "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(40,"div",0),o.TgZ(41,"div",18),o.TgZ(42,"nb-card"),o.TgZ(43,"nb-card-header"),o.TgZ(44,"h1"),o._UZ(45,"nb-icon",19),o._uU(46," Cadastramento de Usu\xe1rios"),o.qZA(),o.qZA(),o.TgZ(47,"nb-card-body"),o.TgZ(48,"table",20),o.TgZ(49,"thead",21),o.TgZ(50,"tr",21),o.TgZ(51,"td",22),o._uU(52,"ID"),o.qZA(),o.TgZ(53,"td",22),o._uU(54,"Matricula"),o.qZA(),o.TgZ(55,"td",22),o._uU(56,"Nome"),o.qZA(),o.TgZ(57,"td",22),o._uU(58,"CGC"),o.qZA(),o.TgZ(59,"td",22),o._uU(60,"Role"),o.qZA(),o.TgZ(61,"td",22),o._uU(62,"Excluir"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(63,"tbody"),o.YNc(64,g,16,7,"tr",23),o.ALo(65,"async"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}2&e&&(o.xp6(8),o.Q6J("ngModel",t.searchText),o.xp6(3),o.Q6J("icon","search-outline"),o.xp6(15),o.Q6J("ngModel",t.matricula),o.xp6(5),o.Q6J("ngModel",t.role),o.xp6(1),o.Q6J("ngForOf",t.userService.roles),o.xp6(32),o.Q6J("ngForOf",o.lcZ(65,6,t.usuariosSelecionados)))},directives:[s.Asz,s.ndF,s.yKW,s.jBG,s.h8i,a.Fj,a.JJ,a.On,s.DPz,s.yyc,s.fMN,s.rs,u.sg,s.q51,u.mk],pipes:[u.Ov],styles:[".flex[_ngcontent-%COMP%]{display:flex;align-items:center}.mensagem-limite30[_ngcontent-%COMP%]{width:30%}.mensagem-limite10[_ngcontent-%COMP%]{width:10%}.dir[_ngcontent-%COMP%]{text-align:right!important}.row-title[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-weight:700}.hand[_ngcontent-%COMP%]{cursor:pointer}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(odd){background:#f4eeff}tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-child(2n){background:#fff}tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%] > th[_ngcontent-%COMP%]{vertical-align:middle}.font-2_25rem[_ngcontent-%COMP%]{font-size:2.25rem}"]}),e})()},4357:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var i=n(93342),o=n(37716),r=n(86665),c=n(99763);let s=(()=>{class e{constructor(e,t){this.authService=e,this.router=t,this.alive=!1}canActivate(){return this.authService.isAuthenticated().pipe((0,i.b)(e=>{e||this.router.navigate(["gecdi/security/login"])}))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(r._o),o.LFG(c.F0))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);